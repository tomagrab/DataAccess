@page "/create-person"
@inject IPeopleData peopleData
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<div class="flex flex-col items-center">
    <EditForm Model="@person" method="POST" FormName="CreatePersonForm" OnValidSubmit="@CreatePerson" class="flex flex-col items-center shadow border rounded p-4">
        <h3>Create Person</h3>
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group">
            <InputText id="FirstName" class="form-control" @bind-Value="person.FirstName" placeholder="First name" />
        </div>

        <div class="form-group">
            <InputText id="LastName" class="form-control" @bind-Value="person.LastName" placeholder="Last name"/>
        </div>
        <button type="submit" class="btn btn-primary btn-base">Create</button>
    </EditForm>
</div>

@code {
    private PersonModel person = new PersonModel();
    private async Task CreatePerson()
    {
        await peopleData.InsertPerson(person);
        person = new PersonModel();
        NavigationManager.NavigateTo("/read-people");
    }
}