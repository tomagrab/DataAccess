@page "/create-person"
@inject IPeopleData peopleData
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<h3>Create Person</h3>

<EditForm Model="@person" method="POST" FormName="CreatePersonForm" OnValidSubmit="@CreatePerson">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="FirstName">First Name</label>
        <InputText id="FirstName" class="form-control" @bind-Value="person.FirstName" />
    </div>

    <div class="form-group">
        <label for="LastName">Last Name</label>
        <InputText id="LastName" class="form-control" @bind-Value="person.LastName" />
    </div>
    <button type="submit" class="btn btn-primary btn-base">Create</button>
</EditForm>

@code {
    private PersonModel person = new PersonModel();
    private async Task CreatePerson()
    {
        await peopleData.InsertPerson(person);
        person = new PersonModel();
        NavigationManager.NavigateTo("/read-people");
    }
}